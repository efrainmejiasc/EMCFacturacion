@using FacturacionEMCSite.StringResources;

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EMC-Facturacion</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="~/css/modalStyle.css" />
    <style type="text/css">
        body, html {
            height: 100%;
        }

        * {
            box-sizing: border-box;
        }

        .bg-img {
            /* The image used */
            background-image: url("../css/ImgSite/CentralImgAcceso.png");
            height: 100vh;
            /* Control the height of the image */
            min-height: 380px;
            /* Center and scale the image nicely */
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
        }

        * {
            margin: 0px;
            padding: 0px;
        }

        #header {
            margin: auto;
            width: 80%;
            font-family: Arial, Helvetica, sans-serif;
        }

        ul, ol {
            list-style: none;
        }

        .nav > li {
            float: left;
        }

        .nav li a {
            background-color: white;
            color: dimgray;
            text-decoration: none;
            padding: 10px 12px;
            display: block;
        }

            .nav li a:hover {
                background-color: whitesmoke;
            }

        .nav li ul {
            display: none;
            position: absolute;
            min-width: 140px;
        }

        .nav li:hover > ul {
            display: block;
        }

        .nav li ul li {
            position: relative;
        }

            .nav li ul li ul {
                right: -140px;
                top: 0px;
            }

    </style>
</head>
<body>
    <header>
        <div class="container-fluid">
          <div class="form-group row">

                <div class="col-md-4">
                    <nav class="sidebar sidebar-offcanvas" id="sidebar">
                        <ul class="nav nav-height">
                            <li class="nav-item nav-profile border-bottom">
                                <a href="#" class="nav-link flex-column">
                                    <div class="nav-profile-image">
                                        <img src="~/Content/img/logo-e.png" alt="profile" style="width:30%;height:27%;">
                                        <!--change to offline or busy as needed-->
                                    </div>
                                    <div class="nav-profile-text d-flex ms-0 mb-3 flex-column">
                                        <span class="font-weight-semibold mb-1 mt-2 text-center" style="font-size:14px;" id="nombreUsuario"> </span>
                                        <span class="text-secondary icon-sm text-center" style="font-size:14px;" id="emailUsuario"> </span>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>

                <div class="col-md-8">
                    <div id="header" >
                        <br />
                        <ul class="nav container-fluid" style="">


                            <li class="nav-item" id="tablero">
                                <a class="nav-link" href="@Url.Action("About","Home")">
                                    <i class="bi bi-bar-chart-fill"></i>
                                    <span class="menu-title"> @Resources.Dashboard </span>
                                </a>
                            </li>

                            <li class="nav-item" id="_com">
                                <a class="nav-link" href="">
                                    <i class="bi bi-basket"></i>
                                    <span class="menu-title">;@Resources.Purchases</span>
                                </a>
                                <ul>
                                    <li class="nav-item" id="facturaCompra">
                                        <a class="nav-link" href="@Url.Action("Index","FacturaCompra")">
                                            <i class="bi bi-bag-check"></i>
                                            <span class="menu-title">@Resources.PurchasesRecord</span>
                                        </a>
                                    </li>
                                    <li class="nav-item" id="resumenFC">
                                        <a class="nav-link" href="@Url.Action("About","FacturaCompra")">
                                            <i class="bi bi-sticky"></i>
                                            <span class="menu-title"> @Resources.PurchasesSummary </span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="nav-item" id="_inve">
                                <a class="nav-link" href="">
                                    <i class="bi bi-clipboard-data"></i>
                                    <span class="menu-title">@Resources.Inventory</span>
                                </a>
                                <ul>
                                    <li class="nav-item" id="stock">
                                        <a class="nav-link" href="@Url.Action("Index","Inventario")">
                                            <i class="bi bi-graph-up-arrow"></i>
                                            <span class="menu-title"> @Resources.Stock </span>
                                        </a>
                                    </li>

                                    <li class="nav-item" id="asignacion">
                                        <a class="nav-link" href="@Url.Action("About","Inventario")">
                                            <i class="bi bi-diagram-3-fill"></i>
                                            <span class="menu-title"> ;@Resources.Assignments </span>
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="nav-item" id="_inve">
                                <a class="nav-link" href="">
                                    <i class="bi bi-cart4"></i>
                                    <span class="menu-title">@Resources.Sales</span>
                                </a>
                                <ul>
                                    <li class="nav-item" id="facturaVenta">
                                        <a class="nav-link" href="@Url.Action("Index","FacturaVenta")">
                                            <i class="bi bi-bag-check-fill"></i>
                                            <span class="menu-title"> @Resources.SalesRecord </span>
                                        </a>
                                    </li>

                                    <li class="nav-item" id="resumenFV">
                                        <a class="nav-link" href="@Url.Action("About","FacturaVenta")">
                                            <i class="bi bi-sticky-fill"></i>
                                            <span class="menu-title"> @Resources.SalesSummary </span>
                                        </a>
                                    </li>

                                    <li class="nav-item" id="inicioFacturacion">
                                        <a class="nav-link" href="@Url.Action("Index","InicioFacturacion")">
                                            <i class="bi bi-briefcase"></i>
                                            <span class="menu-title">@Resources.HomeBilling</span>
                                        </a>
                                    </li>

                                </ul>
                            </li>

                            <li class="nav-item" id="productosManager">
                                <a class="nav-link" href="@Url.Action("Index","ProductosManager")">
                                    <i class="bi bi-gear"></i>
                                    <span class="menu-title">@Resources.ManagerProducts </span>
                                </a>
                            </li>

                            <li class="nav-item" id="productosCliente">
                                <a class="nav-link" href="@Url.Action("Index","ProductosCliente")">
                                    <i class="bi bi-search"></i>
                                    <span class="menu-title">@Resources.Product </span>
                                </a>
                            </li>

                            <li class="nav-item" id="usuario">
                                <a class="nav-link" href="@Url.Action("Index","Usuario")">
                                    <i class="bi bi-people"></i>
                                    <span class="menu-title"> @Resources.Users</span>
                                </a>
                            </li>

                            <li class="nav-item" id="logout">
                                <a class="nav-link" href="@Url.Action("Index","Home")">
                                    <i class="bi bi-x-octagon"></i>
                                    <span class="menu-title"> @Resources.LogOut </span>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>



        </div>
      </div>
    </header>

    <div class="container-fluid">
        <main role="main" class="pb-3">
            @RenderBody()
                <input type="hidden" id="cultureInfo"  disabled/>
        </main>
    </div>


    <br /><br /><br />
    <footer>
        <div class="container">
            <a>  &copy;  @DateTime.Now.Year Developer by EMC</a>
        </div>
    </footer>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>
<script>
    var urlGetCultureInfo = '@Url.Action("GetCultureInfo","Empresa")';

    $(document).ready(function () {
        GetCultureInfo();
        GetUsuarioLogeado();
    });

    function GetCultureInfo() {

    $.ajax({
        type: "GET",
        url: urlGetCultureInfo,
        datatype: "json",
        success: function (data) {
            $('#cultureInfo').val(data);
        }
    });

    return false;
}

    function GetUsuarioLogeado() {

        var urlGetUsuarioLogeado = '@Url.Action("GetUsuarioLogger","Usuario")';
        $.ajax({
            type: "GET",
            url: urlGetUsuarioLogeado,
            datatype: "json",
            success: function (data) {
                console.log(data);
                $('#nombreUsuario').html(data.username);
                $('#emailUsuario').html(data.email);
            }
        });
        return false;
    }
</script>